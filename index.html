<!DOCTYPE html>
<html>
  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <link href='https://fonts.googleapis.com/css?family=Architects+Daughter' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen" />
    <link rel="stylesheet" type="text/css" href="stylesheets/pygment_trac.css" media="screen" />
    <link rel="stylesheet" type="text/css" href="stylesheets/print.css" media="print" />

    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <title>Arduino Thermo-server by dullahan-soft</title>
  </head>

  <body>
    <header>
      <div class="inner">
        <h1>Arduino Thermo-server</h1>
        <h2>A project for automating a water pump and monitoring a masonry heater.</h2>
        <a href="https://github.com/dullahan-soft/thermo-server" class="button"><small>View project on</small>GitHub</a>
      </div>
    </header>

    <div id="content-wrapper">
      <div class="inner clearfix">
        <section id="main-content">
          <h3>Summary</h3>

<p>This page contains information on how to setup and install an Arduino thermo-server.  This is a project I completed for a friend who wanted to automate the hot water pump attached to his new masonry heater.  Most of the documentation is for his reference, but there is probably still a good amount of information here to take away if you are considering or starting a similar project.</p>

<h3>Software</h3>

<ul>
<li>The thermo-server sketch which you can download via one of the links in the right column.</li>
<li>Adafruit's <a href="https://github.com/adafruit/Adafruit-MAX31855-library">MAX31855 Arduino library</a>
</li>
<li>Dashboard which is included with the thermo-server sketch.</li>
</ul><h3>Hardware</h3>

<ul>
<li>4 Adafruit <a href="http://adafruit.com/products/269">MAX31855 Arduino boards</a> assembled</li>
<li>4 <a href="http://adafruit.com/products/270">Type-K Thermocouples</a>
</li>
<li><a href="https://www.adafruit.com/products/191">Arduino Mega 2560</a></li>
<li><a href="https://www.adafruit.com/products/201">Arduino Ethernet Shield R3</a></li>
<li><a href="https://www.adafruit.com/products/268">Powerswitch Tail 2</a></li>
<li><a href="https://www.adafruit.com/products/435">Passive PoE Injector Cable Set</a></li>
<li>Breadboard and wires</li>
</ul><h3>Development Environment</h3>

<p>In order to build the sketch and load it onto the Arduino you will have to download and install the <a href="http://arduino.cc/hu/Main/Software">Arduino IDE</a>.  Once downloaded follow the setup steps: </p>

<ul>
<li><a href="http://arduino.cc/en/Guide/Windows">Windows</a></li>
<li><a href="http://arduino.cc/en/Guide/MacOSX">Mac OS</a></li>
<li><a href="http://www.arduino.cc/playground/Learning/Linux">Linux</a></li>
</ul><p>After you have the IDE installed, then install the MAX31855 library.  More information about installing Arduino libraries can be found at the bottom of this <a href="http://www.ladyada.net/library/arduino/libraries.html">library page</a>.</p>

<h3>Build Sketch</h3>

<p>Open the thermo-server sketch which you have downloaded.  Connect the Arduino Mega to your computer with a USB cable.  Hit the Upload button in the IDE to compile and upload the sketch to the Arduino.  </p>

<h4>Problems?</h4>

<ul>
<li>Did you select the correct serial port under Tools-&gt;Serial Port?</li>
<li>Do you have the correct board selected under Tools-&gt;Board-&gt;Arduino Mega 2560 or Mega ADK?<br>
</li>
</ul><p>Once the sketch is successfully uploaded then unplug the board, add the Ethernet shield, and finally plug in an Ethernet cable (the other end being connected somewhere like your router).  </p>

<p>Power up your Arduino either via USB or a power cable and hunt down the Arduino's IP via your router's web interface, fancy command line fun, or a brute force search in your browser address bar.  With the address try hitting the stats page (if your IP was 192.168.1.5 it would be 192.168.1.5/stats) and you should see a simple uptime field.</p>

<h3>Wiring</h3>

<p>Nothing fancy going on here.  The four thermocouple boards are sharing power, ground, clock, and data lines; although, each chip has its own chip select line.  Notice each thermocouple has a 0.1 uF capacitor across it as well.  The capacitor's purpose is to reduce noise and without them the readings are indeed noisy.  Adafruit started shipping the MAX boards with capacitors now as well.</p>

<p>As for the Powertail switch it is simply connected to a digital pin (30) and ground.</p>

<h3>Dashboard</h3>

<p>In the repository under the dash directory lives a little AngularJS app that can pull data from the Arduino web-server.  The dash is good for debugging, displays a graph of the readings, general server state, and can issue pump commands.  Note, the dash is all client-side so the temperature data it pulls is not persistent.  You'll want to set up a data server elsewhere and if you are so inclined reconfigure the dash to point to there at least for the temperature readings.</p>

<h3>Authors and Contributors</h3>

<p>Chris Cacciatore (<a href="https://github.com/cacciatc" class="user-mention">@cacciatc</a>)</p>

<h3>Support or Contact</h3>

<p><a href="mailto:chris.cacciatore@dullahansoft.com">chris.cacciatore@dullahansoft.com</a></p>
        </section>

        <aside id="sidebar">
          <a href="https://github.com/dullahan-soft/thermo-server/zipball/master" class="button">
            <small>Download</small>
            .zip file
          </a>
          <a href="https://github.com/dullahan-soft/thermo-server/tarball/master" class="button">
            <small>Download</small>
            .tar.gz file
          </a>

          <p class="repo-owner"><a href="https://github.com/dullahan-soft/thermo-server"></a> is maintained by <a href="https://github.com/dullahan-soft">dullahan-soft</a>.</p>

          <p>This page was generated by <a href="pages.github.com">GitHub Pages</a> using the Architect theme by <a href="http://twitter.com/jasonlong">Jason Long</a>.</p>
        </aside>
      </div>
    </div>

            <script type="text/javascript">
            var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
            document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
          </script>
          <script type="text/javascript">
            try {
              var pageTracker = _gat._getTracker("UA-24158768-9");
            pageTracker._trackPageview();
            } catch(err) {}
          </script>

  </body>
</html>